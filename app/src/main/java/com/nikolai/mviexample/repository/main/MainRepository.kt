package com.nikolai.mviexample.repository.mainimport androidx.lifecycle.LiveDataimport androidx.lifecycle.Transformationsimport com.nikolai.mviexample.api.RetrofitBuilderimport com.nikolai.mviexample.ui.main.state.MainViewStateimport com.nikolai.mviexample.util.ApiEmptyResponseimport com.nikolai.mviexample.util.ApiErrorResponseimport com.nikolai.mviexample.util.ApiSuccessResponseimport com.nikolai.mviexample.util.DataStateobject MainRepository {	fun getBlogPosts(): LiveData<DataState<MainViewState>> {		return Transformations				.switchMap(RetrofitBuilder.apiService.getBlogPosts()) { genericApiResponse ->					object : LiveData<DataState<MainViewState>>() {						override fun onActive() {							super.onActive()							value = when (genericApiResponse) {								is ApiSuccessResponse -> {									DataState.data(data = MainViewState(											blogPost = genericApiResponse.body)									)								}								is ApiErrorResponse -> {									DataState.error(											errorMessage = genericApiResponse.errorMessage									)								}								is ApiEmptyResponse -> {									DataState.error(											errorMessage = "HTTP 204.Returned NOTHING!"									)								}							}						}					}				}	}	fun getUser(userId: String): LiveData<DataState<MainViewState>> {		return Transformations				.switchMap(RetrofitBuilder.apiService.getUser(userId)) { genericApiResponse ->					object : LiveData<DataState<MainViewState>>() {						override fun onActive() {							super.onActive()							value = when (genericApiResponse) {								is ApiSuccessResponse -> {									DataState.data(data = MainViewState(user = genericApiResponse.body))								}								is ApiErrorResponse -> {									DataState.error(											errorMessage = genericApiResponse.errorMessage									)								}								is ApiEmptyResponse -> {									DataState.error(											errorMessage= "HTTP 204.Returned NOTHING!"									)								}							}						}					}				}	}}